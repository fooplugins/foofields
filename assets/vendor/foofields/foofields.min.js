function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}(this,function(){"use strict";var i=function(){if("undefined"!=typeof Map)return Map;function i(e,n){var i=-1;return e.some(function(e,t){return e[0]===n&&(i=t,!0)}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=i(this.__entries__,e),n=this.__entries__[t];return n&&n[1]},e.prototype.set=function(e,t){var n=i(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,n=i(t,e);~n&&t.splice(n,1)},e.prototype.has=function(e){return!!~i(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];e.call(t,o[1],o[0])}},e}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},c=2;var o=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,r=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,o=0;function s(){n&&(n=!1,e()),i&&a()}function r(){l(s)}function a(){var e=Date.now();if(n){if(e-o<c)return;i=!0}else i=!(n=!0),setTimeout(r,t);o=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;o.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},h=v(0,0,0,0);function p(e){return parseFloat(e)||0}function g(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+p(n["border-"+t+"-width"])},0)}function a(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var i,o=d(e).getComputedStyle(e),s=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n],s=e["padding-"+o];t[o]=p(s)}return t}(o),r=s.left+s.right,a=s.top+s.bottom,l=p(o.width),c=p(o.height);if("border-box"===o.boxSizing&&(Math.round(l+r)!==t&&(l-=g(o,"left","right")+r),Math.round(c+a)!==n&&(c-=g(o,"top","bottom")+a)),(i=e)!==d(i).document.documentElement){var u=Math.round(l+r)-t,f=Math.round(c+a)-n;1!==Math.abs(u)&&(l-=u),1!==Math.abs(f)&&(c-=f)}return v(s.left,s.top,l,c)}var f="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return n?f(e)?v(0,0,(t=e.getBBox()).width,t.height):a(e):h;var t}function v(e,t,n,i){return{x:e,y:t,width:n,height:i}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var n,i,o,s,r,a,l,c=(i=(n=t).x,o=n.y,s=n.width,r=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),u(l,{x:i,y:o,width:s,height:r,top:o,right:i+s,bottom:r+o,left:i}),l);u(this,{target:e,contentRect:c})},F=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new _(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return 0<this.activeObservations_.length},e}(),y="undefined"!=typeof WeakMap?new WeakMap:new i,e=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=r.getInstance(),i=new F(t,n,this);y.set(this,i)};return["observe","unobserve","disconnect"].forEach(function(t){e.prototype[t]=function(){var e;return(e=y.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:e}),function(l,r){var e={version:300};if("wpColorPickerAlpha"in window&&"version"in window.wpColorPickerAlpha){var t=parseInt(window.wpColorPickerAlpha.version,10);if(!isNaN(t)&&e.version<=t)return}if(!Color.fn.hasOwnProperty("to_s")){Color.fn.to_s=function(e){return"hex"===(e=e||"rgb")&&this._alpha<1&&(e="rgb"),this.toCSS(e).replace(/\s+/g,"")},window.wpColorPickerAlpha=e;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==";l.widget("a8c.iris",l.a8c.iris,{alphaOptions:{alphaEnabled:!1,alphaCustomWidth:91,alphaReset:!1,alphaColorType:"hex",isDeprecated:!1},_getCurrentColor:function(e){return e===r&&(e=this._color),this.alphaOptions.alphaEnabled?e.to_s(this.alphaOptions.alphaColorType):e.toString()},_addInputListeners:function(o){var s=this,e=function(e){var t=o.val(),n=new Color(t),i=s.alphaOptions.alphaColorType||"hex";t=t.replace(/^(#|(rgb|hsl)a?)/,""),o.removeClass("iris-error"),n.error?""!==t&&o.addClass("iris-error"):n.toString()===s._color.toString()&&n._alpha===s.color._alpha||"keyup"!==e.type&&"hex"===i&&t.match(/^[0-9a-fA-F]{3}$/)&&s._setOption("color",s._getCurrentColor(n))};o.on("change",e).on("keyup",s._debounce(e,100)),s.options.hide&&o.one("focus",function(){s.show()})},_dimensions:function(e){if(this._super(e),this.alphaOptions.alphaEnabled){var t,n,i,o,s,r=this.options,a=this.controls.square,l=this.picker.find(".iris-strip");for(t=Math.round(this.picker.outerWidth(!0)-(r.border?22:0)),n=Math.round(a.outerWidth()),i=Math.round((t-n)/2),o=Math.round(i/2),s=Math.round(n+2*i+2*o);t<s;)i=Math.round(i-2.5),o=Math.round(o-1),s=Math.round(n+2*i+2*o);a.css("margin","0"),l.width(i).css("margin-left",o+"px")}},_change:function(){var t=this,e=t.active;if(t._super(),t.alphaOptions.alphaEnabled){var n=t.controls,i=parseInt(100*t._color._alpha),o=t._color.toRgb(),s=["rgb("+o.r+","+o.g+","+o.b+") 0%","rgba("+o.r+","+o.g+","+o.b+", 0) 100%"];t.picker.closest(".wp-picker-container").find(".wp-color-result");t.options.color=t._getCurrentColor(),n.stripAlpha.css({background:"linear-gradient(to bottom, "+s.join(", ")+"), url("+a+")"}),e&&n.stripAlphaSlider.slider("value",i),t._color.error||t.element.removeClass("iris-error").val(t._getCurrentColor()),t.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){var e=l(this).data("color");t.alphaOptions.alphaReset&&(t._color._alpha=1,e=t._getCurrentColor()),t._setOption("color",e)})}},_paintDimension:function(e,t){var n=this,i=!1;n.alphaOptions.alphaEnabled&&"strip"===t&&(i=n._color,n._color=new Color(i.toString()).setHSpace(n.options.mode),n.hue=n._color.h()),n._super(e,t),i&&(n._color=i)},_setOption:function(e,t){var n=this,i=n.element;if("alphaOptions"===e){if("object"===_typeof(t)&&(n.alphaOptions=l.extend({},n.alphaOptions,t)),!n.alphaOptions.alphaEnabled)return;n.alphaOptions.alphaCustomWidth&&i.width(parseInt(i.width()+n.alphaOptions.alphaCustomWidth,10));var o=n.controls.strip.clone(!1,!1),s=o.find(".iris-slider-offset"),r={stripAlpha:o,stripAlphaSlider:s};o.addClass("iris-strip-alpha"),s.addClass("iris-slider-offset-alpha"),o.appendTo(n.picker.find(".iris-picker-inner")),n.controls=l.extend(!0,n.controls,r),n.controls.stripAlphaSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*n._color._alpha),slide:function(e,t){n.active="strip",n._color._alpha=parseFloat(t.value/100),n._change.apply(n,arguments)}}),n._dimensions(!0),n._setOption("color",n._getCurrentColor())}else if(n.alphaOptions.alphaEnabled&&"color"===e){t=""+t;var a=new Color(t).setHSpace(n.options.mode);a.error||(n._color=a,n.options.color=n._getCurrentColor(),n.active="external",n._change())}else n._super(e,t)},color:function(e){return!0===e?this._color.clone():e===r?this._getCurrentColor():void this.option("color",e)}}),l.widget("wp.wpColorPicker",l.wp.wpColorPicker,{_create:function(){this._alphaOptions={alphaEnabled:!1,alphaCustomWidth:91,alphaReset:!1,alphaColorType:"hex",isDeprecated:!1},this._super()},_addListeners:function(){var o=this,i=o.element;if("alphaEnabled"in o.options&&o.options.alphaEnabled)if(o.options.alphaEnabled&&i.is("input")&&"full"===o.options.type){var s={alphaEnabled:!0,isDeprecated:o.toggler.is("a")};l.each(o._alphaOptions,function(e,t){if("alphaEnabled"===e||"isDeprecated"===e)return!0;var n=e in o.options?o.options[e]:r;switch(e){case"alphaCustomWidth":n=(n=n===r?t:n)?parseInt(n,10):0,n=isNaN(n)?t:n;break;case"alphaColorType":if(n!==r&&n.match(/^(hex|rgb|hsl)$/))n=t;else{var i=o.initialValue;i&&o.options.defaultColor&&(i=o.options.defaultColor),i&&i.match(/^(rgb|hsl)/)&&(n=i.substring(0,3))}break;default:n=n===r?t:!!n}s[e]=n}),o._alphaOptions=l.extend(o._alphaOptions,s),o.toggler.css({"background-image":"url("+a+")"}),o._alphaOptions.isDeprecated?o.toggler.html('<span class="color-alpha" />'):o.toggler.css({position:"relative"}).append('<span class="color-alpha" />'),o.colorAlpha=o.toggler.find("span.color-alpha"),o.colorAlpha.css({"background-color":i.val()}),i.iris({alphaOptions:o._alphaOptions,change:function(e,t){o._alphaOptions.isDeprecated&&o.toggler.css({"background-image":"url("+a+")"});var n=i.iris("instance").color();o.colorAlpha.css({"background-color":n}),l.isFunction(o.options.change)&&o.options.change.call(this,e,t,n)}}),o.wrap.on("click.wpcolorpicker",function(e){e.stopPropagation()}),o.toggler.click(function(){o.toggler.hasClass("wp-picker-open")?o.close():o.open()}),i.on("change",function(e){var t=l(this).val();(i.hasClass("iris-error")||""===t||t.match(/^(#|(rgb|hsl)a?)$/))&&(o._alphaOptions.isDeprecated&&o.toggler.removeAttr("style"),o.colorAlpha.css("background-color",""),l.isFunction(o.options.clear)&&o.options.clear.call(this,e))}),o.button.on("click",function(e){l(this).hasClass("wp-picker-clear")?(o._alphaOptions.isDeprecated&&o.toggler.removeAttr("style"),o.colorAlpha.css("background-color",""),i.val(""),l.isFunction(o.options.clear)&&o.options.clear.call(this,e),i.trigger("change")):l(this).hasClass("wp-picker-default")&&i.val(o.options.defaultColor).change()})}else o._super();else o._super()},color:function(e){if(e===r)return this._alphaOptions.alphaEnabled?this.element.iris("instance").color():this.element.iris("option","color");this.element.iris("option","color",e)}})}}(jQuery),function(e,t){t.config={opt:{smallScreen:960,smallField:320,on:{},fields:{}},cls:{small:"foofields-small",hoverable:"foofields-hoverable",active:"foofields-active",first:"foofields-first",last:"foofields-last",hidden:"foofields-hidden",selected:"foofields-selected",container:{el:"foofields-container",content:{el:"foofields-content",field:"foofields-field"},tabs:{el:"foofields-tabs",exists:"foofields-has-tabs",tab:{el:"foofields-tab",link:"foofields-tab-link",icon:"foofields-tab-icon",text:"foofields-tab-text",menu:{el:"foofields-tab-menu",exists:"foofields-has-menu",visible:"foofields-show-menu",showing:"foofields-menu-showing",header:"foofields-tab-menu-header",item:{el:"foofields-tab-menu-item",link:"foofields-tab-menu-link",text:"foofields-tab-menu-text"}}}}},fields:{}},i18n:{fields:{}}},t.$=e}(jQuery,window.FooFields=window.FooFields||{}),function(e){if(e){var t={$:e,version:"0.1.9",versionCompare:function(e,t){if(!/[\d.]/.test(e)||!/[\d.]/.test(t))return NaN;function n(e){for(var t=e.split("."),n=[],i=0,o=t.length;i<o;i++)n[i]=parseInt(t[i]),isNaN(n[i])&&(n[i]=0);return n}for(var i=n(e),o=n(t);i.length<o.length;)i.push(0);for(;o.length<i.length;)o.push(0);for(var s=0;s<i.length;++s){if(o.length===s)return 1;if(i[s]!==o[s])return i[s]>o[s]?1:-1}return i.length!==o.length?-1:0}};!function(){try{return!!window.FooFields.utils}catch(e){return!1}}()?window.FooFields.utils=t:0<t.versionCompare(t.version,window.FooFields.utils.version)?(console.warn("An older version of FooFields.utils ("+window.FooFields.utils.version+") already exists in the page, version "+t.version+" will override it."),window.FooFields.utils=t):console.warn("A newer version of FooFields.utils ("+window.FooFields.utils.version+") already exists in the page, version "+t.version+" will not register itself.")}else console.warn("jQuery must be included in the page prior to the FooFields.utils library.")}(jQuery),function(t,n){"0.1.9"===n.version&&(n.is={},n.is.array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.is.boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},n.is.element=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},n.is.empty=function(e){if(n.is.undef(e)||null===e)return!0;if(n.is.number(e)&&0===e)return!0;if(n.is.boolean(e)&&!1===e)return!0;if(n.is.string(e)&&0===e.length)return!0;if(n.is.array(e)&&0===e.length)return!0;if(n.is.jq(e)&&0===e.length)return!0;if(n.is.hash(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},n.is.error=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.is.fn=function(e){return e===window.alert||"[object Function]"===Object.prototype.toString.call(e)},n.is.hash=function(e){return n.is.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},n.is.jq=function(e){return!n.is.undef(t)&&e instanceof t},n.is.number=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},n.is.object=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!n.is.undef(e)&&null!==e},n.is.promise=function(e){return n.is.object(e)&&n.is.fn(e.then)&&n.is.fn(e.promise)},n.is.size=function(e){return!!(n.is.string(e)&&!n.is.empty(e)||n.is.number(e))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(e)},n.is.string=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.is.undef=function(e){return void 0===e})}(FooFields.utils.$,FooFields.utils),function(f,d,h){if("0.1.9"===d.version){d.fn={};var a=Function.prototype.toString;d.fn.CONTAINS_SUPER=/xyz/.test(a.call(function(){xyz}))?/\b_super\b/:/.*/,d.fn.addOrOverride=function(e,t,n){if(h.object(e)&&h.string(t)&&!h.empty(t)&&h.fn(n)){var i,o,s=e[t],r=h.fn(s)&&d.fn.CONTAINS_SUPER.test(a.call(n));e[t]=r?(i=s,o=n,function(){var e=this._super;this._super=i;var t=o.apply(this,arguments);return this._super=e,t}):n}},d.fn.apply=function(e,t){function n(){return e.apply(this,t)}return t=h.array(t)?t:[],n.prototype=e.prototype,new n},d.fn.arg2arr=function(e){return Array.prototype.slice.call(e)},d.fn.debounce=function(n,i){var o;return function(){var e=this,t=d.fn.arg2arr(arguments);clearTimeout(o),o=setTimeout(function(){n.apply(e,t)},i)}},d.fn.throttle=function(n,i){var o,s;return function(){var e=this,t=d.fn.arg2arr(arguments);o?(clearTimeout(s),s=setTimeout(function(){Date.now()-o>=i&&(n.apply(e,t),o=Date.now())},i-(Date.now()-o))):(n.apply(e,t),o=Date.now())}},d.fn.check=function(t,e,n,i){function o(e){return function(){return e.apply(t,arguments)}}return n=h.fn(n)?n:f.noop,t=h.object(t)?t:window,e=h.string(e)?d.fn.fetch(e,i):e,h.fn(e)?o(e):o(n)},d.fn.fetch=function(e,n){return!h.string(e)||h.empty(e)?null:(n=h.object(n)?n:window,f.each(e.split("."),function(e,t){if(!n[t])return!1;n=n[t]}),h.fn(n)?n:null)},d.fn.enqueue=function(e,n,t,i){var o=d.fn.arg2arr(arguments),s=f.Deferred(),r=f.Deferred(),a=r.promise(),l=[],c=[],u=!0;return e=o.shift(),n=o.shift(),f.each(e,function(e,t){h.fn(t[n])&&(a=a.then(function(){if(!u){var e=d.fn.arg2arr(arguments);l.push(e)}return u=!1,function(e,t){try{return c.push(e),t.apply(e,o)}catch(e){return s.reject(e,c),s}}(t,t[n])}))}),a.then(function(){if(!u){var e=d.fn.arg2arr(arguments);l.push(e)}u=!1,s.resolve(l)}),a.fail(function(){var e=d.fn.arg2arr(arguments);e.push(c),s.reject.apply(s,e)}),r.resolve(),s.promise()},d.fn.when=function(e){if(!h.array(e)||h.empty(e))return f.when();for(var t=f.Deferred(),n=[],i=e.length,o=0;o<e.length;o++)e[o].then(function(e){n.push(e)}).always(function(){--i||t.resolve(n)});return t.promise()},d.fn.rejectWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.reject.apply(n,i).promise()},d.fn.resolveWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.resolve.apply(n,i).promise()},d.fn.resolved=f.Deferred().resolve().promise(),d.fn.rejected=f.Deferred().reject().promise()}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,r){if("0.1.9"===e.version){e.url={};var s=document.createElement("a");e.url.parts=function(e){s.href=e;var t=s.port?s.port:-1!==["http:","https:"].indexOf(s.protocol)?"https:"===s.protocol?"443":"80":"",n=s.hostname+(t?":"+t:""),i=s.origin?s.origin:s.protocol+"//"+n,o="/"===s.pathname.slice(0,1)?s.pathname:"/"+s.pathname;return{hash:s.hash,host:n,hostname:s.hostname,href:s.href,origin:i,pathname:o,port:t,protocol:s.protocol,search:s.search}},e.url.full=function(e){return!r.string(e)||r.empty(e)?null:(s.href=e,s.href)},e.url.param=function(e,t,n){return r.string(e)&&r.string(t)&&!r.empty(t)?r.undef(n)?(o=((i=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||["",""])[1].replace(/\+/g,"%20"),r.string(o)&&!r.empty(o)?decodeURIComponent(o):null):(r.empty(n)?(i=new RegExp("^([^#]*?)(([^#]*)&)?"+t+"(=[^&#]*)?(&|#|$)"),o=e.replace(i,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(i=new RegExp("([?&])"+t+"[^&]*"),s=t+"="+encodeURIComponent(n),(o=e.replace(i,"$1"+s))!==e||i.test(o)||(o+=(-1!==o.indexOf("?")?"&":"?")+s)),o):e;var i,o,s}}}(FooFields.utils,FooFields.utils.is),function(a,l,c){"0.1.9"===a.version&&(a.str={},a.str.camel=function(e){return l.empty(e)?e:e.toUpperCase()===e?e.toLowerCase():e.replace(/^([A-Z])|[-\s_]+(\w)/g,function(e,t,n){return l.string(n)?n.toUpperCase():t.toLowerCase()})},a.str.kebab=function(e){return l.empty(e)?e:e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(e){return e.toLowerCase()}).join("-")},a.str.contains=function(e,t,n){return!(!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t))&&(t.length<=e.length&&-1!==(n?e.toUpperCase().indexOf(t.toUpperCase()):e.indexOf(t)))},a.str.containsWord=function(e,t,n){if(!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t)||e.length<t.length)return!1;for(var i=e.split(/\W/),o=0,s=i.length;o<s;o++)if(n?i[o].toUpperCase()===t.toUpperCase():i[o]===t)return!0;return!1},a.str.endsWith=function(e,t){return!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t)?e===t:e.slice(e.length-t.length)===t},a.str.escapeRegExp=function(e){return l.empty(e)?e:e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a.str.fnv1a=function(e){if(!l.string(e)||l.empty(e))return null;var t,n,i=2166136261;for(t=0,n=e.length;t<n;t++)i^=e.charCodeAt(t),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0},a.str.from=function(e,t){return!l.string(e)||l.empty(e)||!l.string(t)||l.empty(t)?null:a.str.contains(e,t)?e.substring(e.indexOf(t)+t.length):null},a.str.join=function(e,t,n){if(!l.string(e)||!l.string(t))return null;var i=c.arg2arr(arguments);e=i.shift();var o,s,r=i.shift();for(o=0,s=i.length;o<s;o++)t=i[o],l.empty(t)||(a.str.endsWith(r,e)&&(r=r.slice(0,r.length-e.length)),a.str.startsWith(t,e)&&(t=t.slice(e.length)),r+=e+t);return r},a.str.startsWith=function(e,t){return!l.empty(e)&&!l.empty(t)&&e.slice(0,t.length)===t},a.str.until=function(e,t){return l.empty(e)||l.empty(t)?e:a.str.contains(e,t)?e.substring(0,e.indexOf(t)):e},a.str.format=function(e,t,n){var i=c.arg2arr(arguments);if(e=i.shift(),l.empty(e)||l.empty(i))return e;for(var o in 1===i.length&&(l.array(i[0])||l.object(i[0]))&&(i=i[0]),i)e=e.replace(new RegExp("\\{"+o+"\\}","gi"),i[o]);return e})}(FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(a,l,c,o,s){if("0.1.9"===l.version){l.obj={};var n=function(){};l.obj.create=function(e){if(!c.object(e))throw TypeError("Argument must be an object");n.prototype=e;var t=new n;return n.prototype=null,t},l.obj.extend=function(n,e,t){n=c.object(n)?n:{};var i=o.arg2arr(arguments);return i.shift(),a.each(i,function(e,t){l.obj.merge(n,t)}),n},l.obj.merge=function(e,t){for(var n in e=c.hash(e)?e:{},t=c.hash(t)?t:{})t.hasOwnProperty(n)&&(c.hash(t[n])?(e[n]=c.hash(e[n])?e[n]:{},l.obj.merge(e[n],t[n])):c.array(t[n])?e[n]=t[n].slice():e[n]=t[n]);return e},l.obj.mergeValid=function(n,i,o,e){if(!c.hash(o)||!c.hash(i))return n;var s,t,r;for(s in i=c.hash(i)?i:{},e=c.hash(e)?e:{},i)i.hasOwnProperty(s)&&c.fn(i[s])&&(t=c.array(e[s])?e[s]:c.string(e[s])?[e[s]]:[s],a.each(t,function(e,t){if(r=l.obj.prop(o,t),!c.undef(r))return i[s](r)?(l.obj.prop(n,s,r),!1):void 0}));return n},l.obj.prop=function(n,e,i){var t,o;if(c.object(n)&&!c.empty(e))return c.undef(i)?(s.contains(e,".")?(t=e.split("."),o=t.length-1,a.each(t,function(e,t){if(e===o)i=n[t];else{if(!c.hash(n[t]))return!1;n=n[t]}})):c.undef(n[e])||(i=n[e]),i):void(s.contains(e,".")?(t=e.split("."),o=t.length-1,a.each(t,function(e,t){e===o?n[t]=i:n=c.hash(n[t])?n[t]:n[t]={}})):c.undef(n[e])||(n[e]=i))}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.str),function(u,o,f){if("0.1.9"===o.version){o.ready=function(e){function t(){try{e.call(window,o.$)}catch(e){console.error(e)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)};var i=0;o.uniqueId=function(e,t){var n=e.attr("id");return f.empty(n)&&(n=(t=f.string(t)&&!f.empty(t)?t:"uid-")+ ++i,e.attr("id",n).data("__uniqueId__",!0)),n},o.removeUniqueId=function(e){e.data("__uniqueId__")&&e.removeAttr("id").removeData("__uniqueId__")},o.selectify=function(e){if(f.empty(e))return null;if(f.hash(e)){var t,n={};for(var i in e)e.hasOwnProperty(i)&&(t=o.selectify(e[i]))&&(n[i]=t);return n}return f.string(e)||f.array(e)?(f.string(e)&&(e=[e]),e.map(function(e){return f.string(e)?"."+e.split(/\s/g).join("."):null}).join(",")):null},o.src=function(e,t,n,i,o,s,r){if(!f.string(e))return null;if(!f.string(t))return e;var a=t.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ ").map(function(e){return{url:/^\s*(\S*)/.exec(e)[1],w:parseFloat((/\S\s+(\d+)w/.exec(e)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(e)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(e)||[0,1])[1])}});if(!a.length)return e;a.unshift({url:e,w:a[0].w!==1/0&&a[0].h===1/0?n:1/0,h:a[0].h!==1/0&&a[0].w===1/0?i:1/0,x:1});var l=f.number(r)?r:window.devicePixelRatio||1,c={w:o*l,h:s*l,x:l},u=["w","h","x"];return u.forEach(function(t){var n=Math.max.apply(null,a.map(function(e){return e[t]}));a=a.filter(function(e){return e[t]>=c[t]||e[t]===n})}),u.forEach(function(t){var n=Math.min.apply(null,a.map(function(e){return e[t]}));a=a.filter(function(e){return e[t]===n})}),a[0].url},o.scrollParent=function(e,s,t){e=f.jq(e)?e:u(e),s=f.string(s)&&/^(x|y|xy|yx)$/i.test(s)?s:"xy";var n=u(!!e.length&&e[0].ownerDocument||document);if(t=f.jq(t)?t:n,!e.length)return t;var i=e.css("position"),r="absolute"===i,a=/(auto|scroll)/i,l=/x/i,c=/y/i,o=e.parentsUntil(t).filter(function(e,t){var n=u(this);if(r&&"static"===n.css("position"))return!1;var i=c.test(s)&&t.scrollHeight>t.clientHeight&&a.test(n.css("overflow-y")),o=l.test(s)&&t.scrollWidth>t.clientWidth&&a.test(n.css("overflow-x"));return i||o}).eq(0);return o.is("html")&&(o=n),"fixed"!==i&&o.length?o:t}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(l,c,u){if("0.1.9"===c.version){c.animation={},c.animation.requestFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}).bind(window),c.animation.cancelFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window);var e,t,n=document.createElement("div");c.animation.supported=(e=n.style,u.string(e.animation)||u.string(e.WebkitAnimation)||u.string(e.MozAnimation)||u.string(e.msAnimation)||u.string(e.OAnimation)),c.animation.end=(t=n.style,u.string(t.animation)?"animationend":u.string(t.WebkitAnimation)?"webkitAnimationEnd":u.string(t.MozAnimation)?"animationend":u.string(t.msAnimation)?"msAnimationEnd":u.string(t.OAnimation)?"oAnimationEnd":null),c.animation.duration=function(e,t){if(t=u.number(t)?t:0,!u.jq(e))return t;var n=e.css("animation-duration");if(/^([\d.]*)+?(ms|s)$/i.test(n)){var i=n.match(/^([\d.]*)+?(ms|s)$/i),o=parseFloat(i[1]);return"s"===i[2].toLowerCase()&&(o*=1e3),o}return t},c.animation.iterations=function(e,t){if(t=u.number(t)?t:1,!u.jq(e))return t;var n=e.css("animation-iteration-count");return/^(\d+|infinite)$/i.test(n)?"infinite"===n?1/0:parseInt(n):t},c.animation.start=function(t,e,n,i){var o=l.Deferred(),s=o.promise();if(t=t.first(),c.animation.supported){t.prop("offsetTop");var r=t.data("animation_safety");if(u.hash(r)&&u.number(r.timer)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(c.animation.end+".utils"),r.deferred.reject()),!u.number(i)){var a=c.animation.iterations(t);if(a===1/0)return o.reject("No timeout supplied with an infinite animation."),s;i=c.animation.duration(t)*a+50}r={deferred:o,timer:setTimeout(function(){t.removeData("animation_safety").off(c.animation.end+".utils"),o.resolve()},i)},t.data("animation_safety",r),t.on(c.animation.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(c.animation.end+".utils"),o.resolve())})}return c.animation.requestFrame(function(){u.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),c.animation.supported||o.resolve()}),s}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(a,l,c,u){if("0.1.9"===l.version){l.transition={};var e,t,n=document.createElement("div");l.transition.supported=(e=n.style,c.string(e.transition)||c.string(e.WebkitTransition)||c.string(e.MozTransition)||c.string(e.msTransition)||c.string(e.OTransition)),l.transition.end=(t=n.style,c.string(t.transition)?"transitionend":c.string(t.WebkitTransition)?"webkitTransitionEnd":c.string(t.MozTransition)?"transitionend":c.string(t.msTransition)?"msTransitionEnd":c.string(t.OTransition)?"oTransitionEnd":null),l.transition.duration=function(e,t){if(t=c.number(t)?t:0,!c.jq(e))return t;var n=e.css("transition-duration");if(/^([\d.]*)+?(ms|s)$/i.test(n)){var i=n.match(/^([\d.]*)+?(ms|s)$/i),o=parseFloat(i[1]);return"s"===i[2].toLowerCase()&&(o*=1e3),o}return t},l.transition.start=function(t,e,n,i){var o=a.Deferred(),s=o.promise();if(t=t.first(),l.transition.supported){t.prop("offsetTop");var r=t.data("transition_safety");c.hash(r)&&c.number(r.timer)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(l.transition.end+".utils"),r.deferred.reject()),i=c.number(i)?i:l.transition.duration(t)+50,r={deferred:o,timer:setTimeout(function(){t.removeData("transition_safety").off(l.transition.end+".utils"),o.resolve()},i)},t.data("transition_safety",r),t.on(l.transition.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(l.transition.end+".utils"),o.resolve())})}return u.requestFrame(function(){c.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),l.transition.supported||o.resolve()}),s}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.animation),function(e,o,s,r,a){"0.1.9"===o.version&&(o.Class=function(){},o.Class.extend=function(e){e=s.hash(e)?e:{};var t=r.create(this.prototype);for(var n in e)e.hasOwnProperty(n)&&a.addOrOverride(t,n,e[n]);function i(){if(!s.fn(this.construct))throw new SyntaxError('FooFields.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return t.construct=s.fn(t.construct)?t.construct:function(){},(i.prototype=t).constructor=s.fn(t.__ctor__)?t.__ctor__:i,i.extend=o.Class.extend,i.override=o.Class.override,i.bases=o.Class.bases,i.__base__=this,i},o.Class.override=function(e,t){a.addOrOverride(this.prototype,e,t)},o.Class.__base__=null,o.Class.bases=function(){return function e(t,n){return s.array(n)||(n=[]),s.fn(t)&&null!==t.__base__?(n.unshift(t.__base__),e(t.__base__,n)):n}(this,[])})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.obj,FooFields.utils.fn),function(s,a,l){"0.1.9"===s.version&&(s.Event=s.Class.extend({construct:function(e){if(a.empty(e))throw new SyntaxError("FooFields.utils.Event objects must be supplied a `type`.");var t=l.contains(e,".");this.type=t?l.until(e,"."):e,this.namespace=t?l.from(e,"."):null,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),s.EventClass=s.Class.extend({construct:function(){this.__handlers={}},destroy:function(){this.__handlers={}},on:function(n,t,i){var o=this;return a.object(n)?(i=a.undef(t)?this:t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){o.__on(e,n[t],i)})})):a.string(n)&&a.fn(t)&&(i=a.undef(i)?this:i,n.split(" ").forEach(function(e){o.__on(e,t,i)})),o},__on:function(e,t,n){var i=l.contains(e,"."),o=i?l.until(e,"."):e,s=i?l.from(e,"."):null;a.array(this.__handlers[o])||(this.__handlers[o]=[]),this.__handlers[o].some(function(e){return e.namespace===s&&e.fn===t&&e.thisArg===n})||this.__handlers[o].push({namespace:s,fn:t,thisArg:n})},off:function(n,t,i){var o=this;return a.object(n)?(i=a.undef(t)?this:t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){o.__off(e,a.fn(n[t])?n[t]:null,i)})})):a.string(n)&&(t=a.fn(t)?t:null,i=a.undef(i)?this:i,n.split(" ").forEach(function(e){o.__off(e,t,i)})),o},__off:function(e,t,n){var i=this,o=l.until(e,".")||null,s=l.from(e,".")||null,r=[];a.empty(o)?a.empty(s)||r.push.apply(r,Object.keys(i.__handlers)):r.push(o),r.forEach(function(e){a.array(i.__handlers[e])&&(i.__handlers[e]=i.__handlers[e].filter(function(e){return null!=t?!(e.namespace===s&&e.fn===t&&e.thisArg===n):null!=s&&e.namespace!==s}),0===i.__handlers[e].length&&delete i.__handlers[e])})},trigger:function(e,n){n=a.array(n)?n:[];var i=this,o=[];return e instanceof s.Event?(o.push(e),i.__trigger(e,n)):a.string(e)&&e.split(" ").forEach(function(e){var t=o.push(new s.Event(e))-1;i.__trigger(o[t],n)}),a.empty(o)?null:1===o.length?o[0]:o},__trigger:function(t,n){t.target=this,a.array(this.__handlers[t.type])&&this.__handlers[t.type].forEach(function(e){null!=t.namespace&&e.namespace!==t.namespace||e.fn.apply(e.thisArg,[t].concat(n))})}}))}(FooFields.utils,FooFields.utils.is,FooFields.utils.str),function(i,o,s){var n;"0.1.9"===o.version&&(o.Bounds=o.Class.extend({construct:function(){var e=this;e.top=0,e.right=0,e.bottom=0,e.left=0,e.width=0,e.height=0},inflate:function(e){var t=this;return s.number(e)&&(t.top-=e,t.right+=e,t.bottom+=e,t.left-=e,t.width+=2*e,t.height+=2*e),t},intersects:function(e){return this.left<=e.right&&e.left<=this.right&&this.top<=e.bottom&&e.top<=this.bottom}}),o.getViewportBounds=function(e){n||(n=i(window));var t=new o.Bounds;return t.top=n.scrollTop(),t.left=n.scrollLeft(),t.width=n.width(),t.height=n.height(),t.right=t.left+t.width,t.bottom=t.top+t.height,t.inflate(e),t},o.getElementBounds=function(e){s.jq(e)||(e=i(e));var t=new o.Bounds;if(0!==e.length){var n=e.offset();t.top=n.top,t.left=n.left,t.width=e.width(),t.height=e.height()}return t.right=t.left+t.width,t.bottom=t.top+t.height,t})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,t,i,n,o){"0.1.9"===t.version&&(t.Timer=t.EventClass.extend({construct:function(e){this._super(),this.interval=i.number(e)?e:1e3,this.isRunning=!1,this.isPaused=!1,this.canResume=!1,this.canRestart=!1,this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.__restart=[]},__reset:function(){clearTimeout(this.__timeout),this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.isRunning=!1,this.isPaused=!1,this.canResume=!1},__eventArgs:function(e){return[this.__current,this.__time,this.__decrement].concat(n.arg2arr(arguments))},__tick:function(){var e=this;e.trigger("tick",e.__eventArgs()),e.__current===e.__finish?(e.trigger("complete",e.__eventArgs()),e.__reset()):(e.__decrement?e.__current--:e.__current++,e.__remaining--,e.canResume=0<e.__remaining,e.__timeout=setTimeout(function(){e.__tick()},e.interval))},start:function(e,t){var n=this;n.isRunning||(t=!!i.boolean(t)&&t,n.__restart=[e,t],n.__decrement=t,n.__time=e,n.__remaining=e,n.__current=t?e:0,n.__finish=t?0:e,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(e){this.start(e,!0)},countup:function(e){this.start(e,!1)},restart:function(){this.stop(),this.canRestart&&this.start.apply(this,this.__restart)},stop:function(){(this.isRunning||this.isPaused)&&(this.__reset(),this.trigger("stop",this.__eventArgs()))},pause:function(){var e=this;return null!=e.__timeout&&(clearTimeout(e.__timeout),e.__timeout=null),e.isRunning&&(e.isRunning=!1,e.isPaused=!0,e.trigger("pause",e.__eventArgs())),e.__remaining},resume:function(){var e=this;e.canResume&&(e.isRunning=!0,e.isPaused=!1,e.trigger("resume",e.__eventArgs()),e.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(u,e,f,d){"0.1.9"===e.version&&(e.Factory=e.Class.extend({construct:function(){this.registered={}},contains:function(e){return!f.undef(this.registered[e])},load:function(e,t,n){var i,o,s=this,r=d.arg2arr(arguments),a=[],l=[];for(i in e=r.shift()||{},s.registered)if(s.registered.hasOwnProperty(i)){var c=s.registered[i];e.hasOwnProperty(i)&&(o=e[i],f.string(o)&&(o=d.fetch(e[i])),f.fn(o)&&(c={name:i,klass:o,priority:s.registered[i].priority})),a.push(c)}for(i in e)e.hasOwnProperty(i)&&!s.registered.hasOwnProperty(i)&&(o=e[i],f.string(o)&&(o=d.fetch(e[i])),f.fn(o)&&a.push({name:i,klass:o,priority:0}));return a.sort(function(e,t){return t.priority-e.priority}),u.each(a,function(e,t){f.fn(t.klass)&&l.push(d.apply(t.klass,r))}),l},make:function(e,t,n){var i,o=d.arg2arr(arguments);return e=o.shift(),i=this.registered[e],f.hash(i)&&f.fn(i.klass)?d.apply(i.klass,o):null},names:function(e){e=!!f.boolean(e)&&e;var t,n=[];if(e){var i=[];for(t in this.registered)this.registered.hasOwnProperty(t)&&i.push(this.registered[t]);i.sort(function(e,t){return t.priority-e.priority}),u.each(i,function(e,t){n.push(t.name)})}else for(t in this.registered)this.registered.hasOwnProperty(t)&&n.push(t);return n},register:function(e,t,n){if(!f.string(e)||f.empty(e)||!f.fn(t))return!1;n=f.number(n)?n:0;var i=this.registered[e];return this.registered[e]={name:e,klass:t,priority:f.undef(i)?n:i.priority},!0}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(e,o,s){if("0.1.9"===e.version){var t=!1;try{t=!!window.localStorage}catch(e){t=!1}e.Debugger=e.Class.extend({construct:function(e){this.key=e,this.enabled=!!t&&!!localStorage.getItem(this.key)},enable:function(){t&&(this.enabled=!0,localStorage.setItem(this.key,this.enabled))},disable:function(){t&&(this.enabled=!1,localStorage.removeItem(this.key))},log:function(e,t){this.enabled&&console.log.apply(console,o.arg2arr(arguments))},logf:function(e,t,n){if(this.enabled){var i=o.arg2arr(arguments);e=i.shift(),t=i.shift(),i.unshift(s.format(e,t)),this.log.apply(this,i)}}})}}(FooFields.utils,FooFields.utils.fn,FooFields.utils.str),function(s,e,n){"0.1.9"===e.version&&(e.FullscreenAPI=e.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var e in this.apis)if(this.apis.hasOwnProperty(e)&&this.apis[e].enabled in document)return this.apis[e];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(e){if(this.supported&&e[this.api.request]){var t=e[this.api.request]();return t||s.Deferred(this.__resolver(this.api.request)).promise()}return n.rejected},exit:function(){if(this.supported&&this.element()){var e=document[this.api.exit]();return e||s.Deferred(this.__resolver(this.api.exit)).promise()}return n.rejected},toggle:function(e){return this.element()?this.exit():this.request(e)},__listen:function(){var e=this;e.supported&&s(document).on(e.api.events.change+".utils",function(){e.trigger("change")}).on(e.api.events.error+".utils",function(){e.trigger("error")})},__stopListening:function(){this.supported&&s(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(i){var o=this;return function(e){function t(){e.resolve(),s(document).off(o.api.events.change,t).off(o.api.events.error,n)}function n(){e.reject(new TypeError),s(document).off(o.api.events.change,t).off(o.api.events.error,n)}i===o.api.exit&&o.element()?setTimeout(function(){e.reject(new TypeError)},1):s(document).on(o.api.events.change,t).on(o.api.events.error,n)}}}),e.fullscreen=new e.FullscreenAPI)}(FooFields.utils.$,FooFields.utils,FooFields.utils.fn),function(e,t,n,s,i,o){n.find=function(e,t,n){if(s.array(e)&&s.fn(t))for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return e[i]},n.strip=function(e,t,n){return s.string(e)&&(s.string(t)&&!s.empty(t)&&i.startsWith(e,t)&&(e=i.from(e,t)),s.string(n)&&!s.empty(n)&&i.endsWith(e,n)&&(e=i.until(e,n))),e},n.expose=function(t,n,e){s.object(t)&&s.object(n)&&s.array(e)&&e.forEach(function(e){s.string(e)&&s.fn(t[e])&&(n[e]=t[e].bind(t))})}}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.str,FooFields.utils.obj),function(i,o,s,r,t,a){o.Instance=s.EventClass.extend({construct:function(){var e=this;e._super(),e.opt=a.extend({},o.config.opt),e.cls=a.extend({},o.config.cls),e.i18n=a.extend({},o.config.i18n),e.sel=s.selectify(e.cls),e.$doc=null,e.mqlSmall=null,e.small=!1,e.mqlHoverable=null,e.hoverable=!1,e.containers=[],e.fieldObserver=new ResizeObserver(t.throttle(e.onFieldResizeObserved.bind(e),1e3/60)),e.onMqlSmallChanged=e.onMqlSmallChanged.bind(e),e.onMqlHoverableChanged=e.onMqlHoverableChanged.bind(e)},init:function(e){var n=this;r.hash(e)&&(a.extend(n.opt,e.opt),a.extend(n.i18n,e.i18n),r.hash(e.cls)&&(a.extend(n.cls,e.cls),n.sel=s.selectify(n.cls))),r.empty(n.opt.on)||n.on(n.opt.on,n),n.$doc=i(document),n.mqlSmall=window.matchMedia("(max-width: "+n.opt.smallScreen+"px)"),n.mqlHoverable=window.matchMedia("(hover: hover)"),n.small=n.mqlSmall.matches,n.hoverable=n.mqlHoverable.matches,n.containers=i(n.sel.container.el).map(function(e,t){return new o.Container(n,t)}).get(),n.trigger("init",[n]),n.containers.forEach(function(e){e.init()}),n.mqlSmall.addListener(n.onMqlSmallChanged),n.mqlHoverable.addListener(n.onMqlHoverableChanged),n.trigger("ready",[n])},destroy:function(){var e=this;e.trigger("destroy",[e]),e.fieldObserver.disconnect(),e.mqlSmall.removeListener(e.onMqlSmallChanged),e.mqlHoverable.removeListener(e.onMqlHoverableChanged),e.containers.forEach(function(e){e.destroy()}),r.empty(e.opt.on)||e.off(e.opt.on,e),e._super()},field:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].field(e),t instanceof o.Field)return t},content:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].content(e),t instanceof o.Content)return t},container:function(t){if(r.string(t))return t=s.strip(t,"#"),s.find(this.containers,function(e){return e.id===t})},val:function(){return this.containers.reduce(function(e,t){return e[t.id]=t.val(),e},{})},onMqlSmallChanged:function(e){this.trigger("small-changed",[this,this.small=e.matches])},onMqlHoverableChanged:function(e){this.trigger("hoverable-changed",[this,this.hoverable=e.matches])},onFieldResizeObserved:function(e){var n=this;e.forEach(function(e){var t=i(e.target);r.array(e.contentBoxSize)&&0<e.contentBoxSize.length?t.toggleClass(n.cls.small,e.contentBoxSize[0].inlineSize<n.opt.smallField):t.toggleClass(n.cls.small,e.contentRect.width<n.opt.smallField)})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(s,n,e,r,a){n.Component=e.EventClass.extend({construct:function(e,t,n,i){var o=this;o._super(),o.instance=e,o.$el=r.jq(t)?t:s(t),o.cls=n,o.sel=i},init:function(){},destroy:function(){this._super()}}),n.CtnrComponent=n.Component.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,n,i,o),s.ctnr=t,s.opt=a.extend({showWhen:{field:null,value:null,operator:null}},s.$el.data()),s.visible=!s.$el.hasClass(s.instance.cls.hidden),s._showWhenField=null},init:function(){this.setupVisibilityRules()},destroy:function(){this.teardownVisibilityRules(),this._super()},toggle:function(e){var t=this;t.visible=r.boolean(e)?e:!t.visible,t.$el.toggleClass(t.instance.cls.hidden,!t.visible),t.trigger("toggle",[t.visible,t]),t.instance.trigger("toggle",[t,t.visible])},setupVisibilityRules:function(){var e=this;if(null!==e.opt.showWhen.field){var t=e.instance.field(e.opt.showWhen.field);t instanceof n.Field&&(t.visible?e.visible=e.checkVisibilityRules(t.val()):e.visible=!1,e._showWhenField=t,e._showWhenField.on({change:e.onShowWhenFieldChanged,toggle:e.onShowWhenFieldToggled},e))}e.toggle(e.visible)},teardownVisibilityRules:function(){var e=this;e._showWhenField instanceof n.Field&&e._showWhenField.off({change:e.onShowWhenFieldChanged,toggle:e.onShowWhenFieldToggled},e)},checkVisibilityRules:function(e){var t,n=this.opt.showWhen.value;switch(this.opt.showWhen.operator){case"!==":t=e!==n;break;case"regex":t=new RegExp(n).test(e);break;case"indexOf":t=-1!==e.indexOf(n);break;default:t=e===n}return t},onShowWhenFieldChanged:function(e,t,n){n.visible?this.toggle(this.checkVisibilityRules(t)):this.toggle(!1)},onShowWhenFieldToggled:function(e,t,n){t?this.toggle(this.checkVisibilityRules(n.val())):this.toggle(!1)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,o,i,s,t){o.Container=o.Component.extend({construct:function(e,t){var n=this;n._super(e,t,e.cls.container,e.sel.container),n.id=n.$el.attr("id"),n.$state=n.$el.children('input[type="hidden"][name*="__state"]'),n.$tabContainer=n.$el.children(n.sel.tabs.el),n.$tabs=n.$tabContainer.children(n.sel.tabs.tab.el),n.contents=n.$el.children(n.sel.content.el).map(function(e,t){return new o.Content(n,t)}).get(),n.tabs=n.$tabs.map(function(e,t){return new o.Tab(n,t,e)}).get()},init:function(){var e=this,t=null;e.$el.toggleClass(e.cls.tabs.exists,0<e.tabs.length),e.setSmall(e.instance.small),e.setHoverable(e.instance.hoverable),e.contents.forEach(function(e){e.init(),null===t&&e.active&&(t=e)}),e.tabs.forEach(function(e){e.init()});var n=e.$state.val();s.empty(n)||(t=e.content(n)),!t&&0<e.contents.length&&(t=e.contents[0]),t instanceof o.Content&&e.activate(t.id),e.instance.on({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e)},destroy:function(){var e=this;e.instance.off({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e),e.$el.removeClass(e.cls.tabs.exists),e.tabs.forEach(function(e){e.destroy()}),e.contents.forEach(function(e){e.destroy()})},activate:function(t){var n=this;n.tabs.forEach(function(e){e.activate(t)}),n.contents.forEach(function(e){e.activate(t),e.id===t&&n.$state.val(t)})},toggle:function(t,n){s.string(t)&&(t=i.strip(t,"#"),this.tabs.forEach(function(e){e.target===t?e.toggle(n):e.menu.exists&&e.menu.items.forEach(function(e){e.target===t&&e.toggle(n)})}),this.contents.forEach(function(e){e.id===t&&e.toggle(n)}))},field:function(e){for(var t,n=0,i=this.contents.length;n<i;n++)if(t=this.contents[n].field(e),t instanceof o.Field)return t},content:function(t){if(s.string(t))return t=i.strip(t,"#"),i.find(this.contents,function(e){return e.id===t})},val:function(){return this.contents.reduce(function(e,t){return e[t.id]=t.val(),e},{})},setSmall:function(e){this.$el.toggleClass(this.instance.cls.small,!!e)},setHoverable:function(e){this.$el.toggleClass(this.instance.cls.hoverable,!!e)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,o,s,t,n){o.Tab=o.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e,t,e.cls.tabs.tab,e.sel.tabs.tab),i.index=n,i.$link=i.$el.children(i.sel.link).first(),i.$icon=i.$link.children(i.sel.icon).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=s.strip(i.$link.attr("href"),"#"),i.active=i.$el.hasClass(i.instance.cls.active),i.menu=new o.TabMenu(i,i.$el.children(i.sel.menu.el))},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.ctnr.tabs.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super(),e.menu.init()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super(),e.menu.destroy()},handles:function(e){return this.target===e||this.menu.handles(e)},activate:function(e){var t=this;t.$el.toggleClass(t.instance.cls.active,t.active=t.handles(e)),t.menu.exists&&t.menu.activate(e)},onLinkClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.self;t.menu.exists&&t.instance.small&&!t.instance.hoverable?t.menu.toggle():t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.target,this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(i,o,e,n){o.TabMenu=o.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e.ctnr,t,e.cls.menu,e.sel.menu),n.tab=e,n.$header=i("<li/>",{class:n.cls.header}).append(e.$text.clone()),n.items=n.$el.children(n.sel.item.el).map(function(e,t){return new o.TabMenuItem(n,t,e)}).get(),n.exists=0<n.items.length,n.visible=e.$el.hasClass(n.cls.visible),n._enter=null,n._leave=null,n.onDocumentClick=n.onDocumentClick.bind(n),n.onTabMouseEnter=n.onTabMouseEnter.bind(n),n.onTabMouseLeave=n.onTabMouseLeave.bind(n)},init:function(){var e=this;e.exists&&(e.tab.$el.addClass(e.cls.exists),e.items.forEach(function(e){e.init()}),e.setSmall(e.instance.small),e.setHoverable(e.instance.hoverable),e.instance.on({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e))},destroy:function(){var e=this;e.exists&&(e.instance.off({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e),e.toggle(!1),e.setSmall(!1),e.setHoverable(!1),e.tab.$el.removeClass(e.cls.exists),e.items.forEach(function(e){e.destroy()}))},toggle:function(e){var t=this;t.exists&&(t.visible=n.undef(e)?!t.visible:!!e,t.tab.$el.toggleClass(t.cls.visible,t.visible),t.ctnr.$tabContainer.toggleClass(t.cls.showing,0<t.ctnr.$tabs.filter(t.sel.visible).length),t.visible?t.instance.$doc.on("click.foofields",t.onDocumentClick):t.instance.$doc.off("click.foofields",t.onDocumentClick))},item:function(t){if(this.exists)return e.find(this.items,function(e){return e.target===t})},handles:function(e){return this.item(e)instanceof o.TabMenuItem},activate:function(t){this.exists&&this.items.forEach(function(e){e.activate(t)})},setSmall:function(e){e?this.$el.prepend(this.$header):this.$header.remove()},setHoverable:function(e){var t=this;e?t.tab.$el.on({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}):(t.tab.$el.off({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}),clearTimeout(t._enter),clearTimeout(t._leave),t._enter=null,t._leave=null)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)},onDocumentClick:function(){this.toggle(!1)},onTabMouseEnter:function(){var e=this;clearTimeout(e._leave),(e._leave=null)===e._enter&&(e._enter=setTimeout(function(){e.toggle(!0),e._enter=null},300))},onTabMouseLeave:function(){var e=this;clearTimeout(e._enter),(e._enter=null)===e._leave&&(e._leave=setTimeout(function(){e.toggle(!1),e._leave=null},300))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(e,t,o,n,i){t.TabMenuItem=t.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e.ctnr,t,e.cls.item,e.sel.item),i.menu=e,i.index=n,i.active=i.$el.hasClass(i.instance.cls.active),i.$link=i.$el.children(i.sel.link).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=o.strip(i.$link.attr("href"),"#")},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.menu.items.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.target===e)},onLinkClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.self;t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.target,this.checkVisibilityRules(t))}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,s,r,t,n){s.Content=s.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e,t,e.cls.content,e.sel.content),n.id=n.$el.attr("id"),n.active=n.$el.hasClass(n.instance.cls.active),n.fields=n.$el.children(n.sel.field).map(function(e,t){return s.fields.create(n,t)}).get()},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.active,e.active),e._super(),e.fields.forEach(function(e){e.init()})},destroy:function(){this.fields.forEach(function(e){e.destroy()}),this._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.id===e)},field:function(t){var n=[],e=r.find(this.fields,function(e){return e instanceof s.FieldGroup&&n.push(e),e.id===t});if(!(e instanceof s.Field))for(var i=0,o=n.length;i<o;i++)if((e=n[i].field(t))instanceof s.Field)return e;return e},onShowWhenFieldChanged:function(e,t){this.ctnr.toggle(this.id,this.checkVisibilityRules(t))},val:function(){return this.fields.reduce(function(e,t){return e[t.id]=t.val(),e},{})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(s,e,t,d,h){e.Fields=t.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,o,s,r){if(!d.string(n))return!1;if(this._super(e,t,r)){var a=this.registered[e];return a.selector=n,a.options=d.hash(i)?i:{},a.classes=d.hash(o)?o:{},a.i18n=d.hash(s)?s:{},!0}return!1},make:function(e,t,n,i){var o=this.registered[e],s={},r={};if(d.hash(o)){var a=t.instance,l=this.bases(e),c=[{}],u=[{}],f=[{}];return l.push(this.registered[e]),l.push({options:a.opt.fields[e],classes:a.cls.fields[e],i18n:a.i18n.fields[e]}),l.forEach(function(e){c.push(e.options),u.push(e.classes),f.push(e.i18n)}),c.push(i),u.push(r),f.push(s),i=h.extend.apply(h,c),r=h.extend.apply(h,u),s=h.extend.apply(h,f),this._super(e,t,n,i,r,s)}return null},create:function(e,t,n){var i,o=this;for(i in t=d.jq(t)?t:s(t),n=h.extend({},n,t.data()),o.registered)if(o.registered.hasOwnProperty(i)&&"field"!==i&&t.is(o.registered[i].selector))return o.make(i,e,t,n);return o.make("field",e,t,n)},bases:function(e){if(!this.contains(e))return[];var n=this,t=n.registered[e].klass.bases(),i=[];return t.forEach(function(e){var t=n.find(e);null!==t&&i.push(t)}),i},find:function(e){var t,n=this.registered;for(t in n)if(n.hasOwnProperty(t)&&n[t].klass===e)return n[t];return null}}),e.fields=new e.Fields}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(a,e,r,l){e.Field=e.CtnrComponent.extend({construct:function(e,t,n,i,o){var s=this;s._super(e.instance,e.ctnr,t,i,r.selectify(i)),s.content=e,s.opt=n,s.i18n=o,s.id=s.$el.attr("id"),s.$label=s.$el.children(s.sel.label),s.$input=s.$el.children(s.sel.input),s.$change=s.$el.find(s.opt.changeSelector),s.$value=s.$el.find(s.opt.valueSelector)},init:function(){var e=this;e.setup(),e.$change.on("change",{self:e},e.onValueChanged),e._super(),e.trigger("init",[e]),e.instance.fieldObserver.observe(e.$el.get(0))},setup:function(){},destroy:function(){var e=this;e.instance.fieldObserver.unobserve(e.$el.get(0)),e.trigger("destroy",[e]),e.$change.off("change",e.onValueChanged),e.teardown(),e._super()},teardown:function(){},toggle:function(e){this._super(e),this.visible?this.enable():this.disable()},disable:function(){this.$el.find(":input").attr("disabled","disabled")},enable:function(){this.$el.find(":input").removeAttr("disabled")},val:function(o){var s=this,e=s.$value,t=e.is(":radio"),n=1===e.length;if(l.undef(o)){l.string(s.opt.valueFilter)&&(e=e.filter(s.opt.valueFilter));var i=e.map(function(){var e=a(this);return null!==s.opt.valueAttribute?e.attr(s.opt.valueAttribute):e.is(":checkbox")&&n?e.is(":checked"):e.val()}).get();return(n||t)&&0<i.length?0===i.length?null:i[0]:t?"":i}var r=!1;e.each(function(e){var t=a(this),n=null,i=null;null!==s.opt.valueAttribute?(i=l.string(o)?o:JSON.stringify(o),n=t.attr(s.opt.valueAttribute),t.attr(s.opt.valueAttribute,i)):t.is(":checkbox,:radio")?(l.boolean(o)?i=o:l.array(o)?i=-1!==o.indexOf(t.val()):l.string(o)&&(i=t.val()===o),null!==i&&(n=t.prop("checked"),t.prop("checked",i))):(n=(i=l.array(o)?e<o.length?o[e]:"":o,t.val()),t.val(i)),r||(r=n!==i)}),r&&s.doValueChanged()},doValueChanged:function(){var e=this,t=e.val();e.trigger("change",[t,e]),e.instance.trigger("change",[e,t])},onValueChanged:function(e){e.data.self.doValueChanged()}}),e.fields.register("field",e.Field,".foofields-field",{showWhen:{field:null,value:null,operator:null},changeSelector:":input",valueSelector:":input",valueFilter:null,valueAttribute:null},{el:"foofields-field",label:"foofields-label",input:"foofields-field-input"},{})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(i,e,t,n){e.AjaxButton=e.Field.extend({setup:function(){var n=this;n.$button=n.$input.find("a:first"),n.$spinner=n.$input.find(".spinner"),n.$message=n.$input.find(".response-message"),n.$button.click(function(e){e.preventDefault(),e.stopPropagation(),n.$message.hide(),n.$spinner.addClass("is-active");var t={action:"foofields_"+n.id,nonce:n.opt.nonce};i("#post_ID").length&&(t.postID=i("#post_ID").val()),i.ajax({url:window.ajaxurl,type:"POST",data:t,error:function(){n.$message.text("An unexpected error occurred!").addClass("error").show()},success:function(e){e&&(e.success?e.data.message&&n.$message.text(e.data.message).addClass("success").show():e.data.message&&n.$message.text(e.data.message).addClass("error").show())},complete:function(){n.$spinner.removeClass("is-active")}})})}}),e.fields.register("ajaxbutton",e.AjaxButton,".foofields-type-ajaxbutton",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,o,n,i){e.fn.wpColorPicker?(t.ColorPicker=t.Field.extend({setup:function(){var e=this;e.debouncedId=null,e.$pickers=e.$input.children("input[type=text]").wpColorPicker({change:e.onColorPickerChange.bind(e),clear:e.onColorPickerClear.bind(e)})},val:function(e){var t=this.$pickers.val();if(o.undef(e))return t;this.$pickers.wpColorPicker("color",e)},doValueChanging:function(e){this.trigger("changing",[e,this]),this.instance.trigger("changing",[this,e])},onColorPickerClear:function(){this.doValueChanged()},onColorPickerChange:function(e,t,n){var i=this;i.doValueChanging(o.string(n)?n:t.color.toString()),null!==i.debouncedId&&clearTimeout(i.debouncedId),i.debouncedId=setTimeout(function(){i.debouncedId=null,i.doValueChanged()},100)}}),t.fields.register("colorpicker",t.ColorPicker,".foofields-type-colorpicker",{},{},{})):console.log("FooFields.ColorPicker dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(t,e,n,i){e.EmbedMetabox=e.Field.extend({setup:function(){var e=this;e.$container=e.$input.children("div").first(),e.$metabox=t("#"+e.$container.data("metabox")),e.$metabox.removeClass("closed"),e.$metabox.detach().appendTo(e.$container)}}),e.fields.register("embed-metabox",e.EmbedMetabox,".foofields-type-embed-metabox",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,r,s,n,t){r.FieldGroup=r.Field.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,t,n,i,o),s.fields=s.$el.children(s.sel.el).map(function(e,t){return r.fields.create(s,t)}).get()},init:function(){this._super(),this.fields.forEach(function(e){e.init()})},destroy:function(){this.fields.forEach(function(e){e.destroy()}),this._super()},field:function(t){var n=[],e=s.find(this.fields,function(e){return e instanceof r.FieldGroup&&n.push(e),e.id===t});if(!(e instanceof r.Field))for(var i=0,o=n.length;i<o;i++)if((e=n[i].field(t))instanceof r.Field)return e;return e},onShowWhenFieldChanged:function(e,t,n){n.visible?this.toggle(this.checkVisibilityRules(t)):this.toggle(!1)},val:function(t){if(!n.object(t))return this.fields.reduce(function(e,t){return e[t.id]=t.val(),e},{});this.fields.forEach(function(e){t.hasOwnProperty(e.id)&&e.val(t[e.id])})}}),r.fields.register("field-group",r.FieldGroup,".foofields-type-field-group",{},{},{})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(n,e,t,i){e.HtmlList=e.Field.extend({updateSelected:function(){var t=this;t.$change.each(function(){var e=n(this);e.parent("label").toggleClass(t.instance.cls.selected,e.is(t.opt.valueFilter))})},setup:function(){this.updateSelected()},doValueChanged:function(){this.updateSelected(),this._super()}}),e.fields.register("htmllist",e.HtmlList,".foofields-type-htmllist,.foofields-type-radiolist,.foofields-type-checkboxlist",{changeSelector:"[type='checkbox'],[type='radio']",valueSelector:"[type='checkbox'],[type='radio']",valueFilter:":checked"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(i,e,t,o){window.Selectize?(e.Selectize=e.Field.extend({setup:function(){var n=this;if(n.$select=n.$input.children("select").first(),n.$select.length){n.$display=n.$input.children("input[type=hidden]").first();var e=o.extend({},n.opt.selectize,{onChange:function(e){if(n.api instanceof window.Selectize){var t=n.api.getItem(e);n.$display.val(t.text())}},load:function(e,t){i.get(window.ajaxurl+"?"+n.opt.query,{q:e}).done(function(e){t(e.results)}).fail(function(){t()})}});n.api=n.$select.selectize(e).get(0).selectize}},val:function(e){return this.api?t.undef(e)?this.api.getValue():(this.api.setValue(e),void this.doValueChanged()):""},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()}}),e.fields.register("selectize",e.Selectize,".foofields-type-selectize",{query:null,selectize:{valueField:"id",labelField:"text",searchField:"text",maxItems:1,create:!1,options:[]}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,o){window.Selectize?(t.SelectizeMulti=t.Field.extend({setup:function(){var i=this;if(i.$select=i.$input.children("select").first(),i.create=!1,i.opt.create&&(i.create=function(e,t){this.close(),i.$input.children(".selectize-control").addClass("loading");var n={action:i.opt.action,nonce:i.opt.nonce,add:e};jQuery.ajax({url:window.ajaxurl,cache:!1,type:"POST",data:n,complete:function(){i.$input.children(".selectize-control").removeClass("loading")},success:function(e){void 0!==e.new?t({value:e.new.value,text:e.new.display}):t(!1)},error:function(){t(!1)}})}),i.$select.length){o.extend(i.opt,i.$select.data());var e=o.extend({},i.opt.selectize,{onChange:function(e){if(i.api instanceof window.Selectize)i.api.getItem(e)},create:i.create});i.api=i.$select.selectize(e).get(0).selectize}},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()},val:function(e){return this.api?n.undef(e)?this.api.getValue():(this.api.setValue(e),void this.doValueChanged()):""}}),t.fields.register("selectize-multi",t.SelectizeMulti,".foofields-type-selectize-multi",{selectize:{plugins:["remove_button"],delimiter:", ",createOnBlur:!0,maxItems:null,closeAfterSelect:!0,items:null}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){e.fn.suggest?(t.Suggest=t.Field.extend({setup:function(){var e=this;e.$suggest=e.$input.children("input[type=text]").first(),e.$suggest.suggest(window.ajaxurl+"?"+e.opt.query,{multiple:e.opt.mulitple,multipleSep:e.opt.separator})}}),t.fields.register("suggest",t.Suggest,".foofields-type-suggest",{},{},{})):console.log("FooFields.Suggest dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,r,t,n){r.Repeater=r.Field.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,t,n,i,o),s.$addButton=s.$input.children(s.sel.add),s.$table=s.$input.children("table").first(),s.$tbody=s.$table.children("tbody").first(),s.$template=s.$table.children("tfoot").first().children("tr").first(),s.rows=s.$tbody.children("tr").map(function(e,t){return new r.RepeaterRow(s,t)}).get()},init:function(){var o,s=this;s._super(),s.$addButton.on("click.foofields",{self:s},s.onAddNewClick),s.rows.forEach(function(e){e.init()}),s.$tbody.sortable({cancel:":input",forcePlaceholderSize:!0,placeholder:"foofields-repeater-placeholder",items:"> tr",distance:5,start:function(e,t){o=t.item.index(),t.placeholder.height(t.item.height())},update:function(e,t){var n=t.item.index(),i=o<n?o:n;s.$tbody.children("tr").eq(i).nextAll("tr").andSelf().trigger("index-change")}})},destroy:function(){this.$tbody.sortable("destroy"),this.rows.forEach(function(e){e.destroy()}),this.$addButton.off(".foofields"),this._super()},addNewRow:function(){var e=this,t=new r.RepeaterRow(e,e.$template.clone());return e.rows.push(t),e.$tbody.append(t.$el).sortable("refresh"),t.init(!0),e.$el.removeClass(e.cls.empty),e.doValueChanged(),t},remove:function(e){var t=this,n=e.$el.nextAll("tr");e.$el.remove(),t.$tbody.sortable("refresh");var i=t.rows.indexOf(e);-1!==i&&t.rows.splice(i,1),0===t.$tbody.children("tr").length&&t.$el.addClass(t.cls.empty),n.trigger("index-change"),t.doValueChanged()},onAddNewClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.addNewRow()},toggle:function(e){this._super(e),this.$template.find(":input").attr("disabled","disabled")},val:function(n){if(!t.array(n))return this.rows.map(function(e){return e.val()});this.rows.forEach(function(e,t){e.val(t<n.length?n[t]:[])})}}),r.fields.register("repeater",r.Repeater,".foofields-type-repeater",{},{add:"foofields-repeater-add",empty:"foofields-empty"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(n,e,t,i){e.RepeaterDelete=e.Field.extend({setup:function(){var e=this;e.$button=e.$input.find(e.sel.button).on("click.foofields",{self:e},e.onClick)},teardown:function(){this.$button.off(".foofields")},onClick:function(e){e.preventDefault(),e.stopPropagation();var t=n(this).data("confirm");t&&confirm(t)&&e.data.self.content.remove()}}),e.fields.register("repeater-delete",e.RepeaterDelete,".foofields-type-repeater-delete",{},{button:"foofields-repeater-delete"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){t.RepeaterIndex=t.Field.extend({setup:function(){this.content.on("index-change",this.onIndexChange,this)},teardown:function(){this.content.off("index-change")},onIndexChange:function(e,t){this.$input.text(i.format(this.opt.format,{index:t,count:t+1}))}}),t.fields.register("repeater-index",t.RepeaterIndex,".foofields-type-repeater-index",{format:"{count}"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.str),function(r,i,e,a,t){i.RepeaterRow=i.Component.extend({construct:function(e,t){var n=this;n._super(e.instance,t,e.cls,e.sel),n.repeater=e,n.ctnr=e.ctnr,n.$cells=n.$el.children("td,th"),n.fields=n.$cells.children(n.sel.el).map(function(e,t){return i.fields.create(n,t)}).get(),n.regex={id:/(_)-?\d+(-.*?)?$/i,name:/(\[.*?]\[)-?\d+(]\[.*?])$/i}},init:function(e){var t=this;t._super(),t.$el.on("index-change.foofields",{self:t},t.onIndexChange),t.fields.forEach(function(e){e.on("change",t.onFieldChange,t),e.init()}),e&&t.reindex()},destroy:function(){var t=this;t.fields.forEach(function(e){e.off("change",t.onFieldChange,t),e.destroy()}),t._super()},remove:function(){this.repeater.remove(this)},reindex:function(){var n=this,i=n.$el.index();n.fields.forEach(function(e){e.id=n.update(e.$el,i),e.$el.find("[id],[name]").each(function(e,t){n.update(t,i)})}),n.trigger("index-change",[i])},update:function(e,t){var n=(e=a.jq(e)?e:r(e)).prop("id");if(a.string(n)){var i=n.replace(this.regex.id,"$1"+t+"$2");i!==n&&(e.prop("id",i),n=i)}var o=e.prop("name");if(a.string(o)){var s=o.replace(this.regex.name,"$1"+t+"$2");s!==o&&e.prop("name",s)}return n},field:function(t){return e.find(this.fields,function(e){return e.id===t})},onIndexChange:function(e){e.data.self.reindex()},onFieldChange:function(){this.repeater.doValueChanged()},enable:function(){this.fields.forEach(function(e){e.enable()})},val:function(n){var e=this.fields.filter(function(e){return!(e instanceof i.RepeaterIndex||e instanceof i.RepeaterDelete)});if(!a.array(n))return e.map(function(e){return e.val()});e.forEach(function(e,t){e.val(t<n.length?n[t]:"")})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i,o){t.__instance__=new t.Instance,n.expose(t.__instance__,t,["on","off","trigger","init","destroy","field","content","container","val"]),n.ready(function(){t.__instance__.init(window.FOOFIELDS)})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj);